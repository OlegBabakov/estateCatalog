(function(e){e.fn.frameScrub=function(t){function n(t){for(var n=0;n<t.length;n++){e("<img />").attr("src",t[n])}}var r=e.extend({defaultImage:null,verticalAlignment:null,showTitles:null,frameWidth:null},t);return this.each(function(){function l(){e(t).css("position","relative");e(t).children("img").map(function(){var n=e(this).width(),i=e(this).height(),s=e(this).attr("src").split("/"),o,u;if(r.frameWidth){o=r.frameWidth+"px";u=i*r.frameWidth/n+"px"}else{o="100%";u="auto"}e(this).css({margin:"auto",display:"inline-block",position:"absolute",left:"0",width:o,height:u,"min-height":e(t).height(),"min-width":n*e(t).height()/i})})}function c(){if(r.verticalAlignment){e(t).children("img").map(function(){switch(r.verticalAlignment){case"middle":e(this).css("top",-(e(this).height()/2)+e(t).height()/2);break;case"top":e(this).css("top",0);break;case"bottom":e(this).css("top",-e(this).height()+e(t).height());break}})}}function h(t,n){var r=e("#"+n).offset();var s=t.clientX-r.left<i?Math.floor((t.clientX-r.left)/o):u.length-1;p(s,n)}function p(n,i){n=n+1;before=n-1;after=n+1;e("#"+i+" img:nth-of-type("+n+")").css("z-index","1");if(r.showTitles){e("#"+r.showTitles).html(e("#"+e(t).attr("id")+" img:nth-of-type("+n+")").attr("title"))}if(n<u.length){e("#"+i+" img:nth-of-type("+after+")").css("z-index","0")}if(before!=0){e("#"+i+" img:nth-of-type("+before+")").css("z-index","0")}}var t=e(this),i=e(this).width(),s=e(this).children("img").length,o=i/s,u=[],a="",f=[];e(t.children("img")).each(function(){u.push(e(this).attr("src"))});n(u);l();e(this).find("img").css("z-index","0");if(r.defaultImage){e(this).find("img#"+r.defaultImage).css("z-index","1")}else{e(this).find("img").first().css("z-index","1")}if(r.showTitles){e("#"+r.showTitles).html(r.defaultImage?e(this).find("img#"+r.defaultImage).attr("title"):e(this).find("img").first().attr("title"))}c();e(window).resize(function(){i=e(t).width();o=i/s;a="";a=setTimeout(c,500)});if(r.showTitle){e(t).children("img").map(function(){var t=e(this).attr("title");f.push(t)})}e(this).on("mouseenter",function(t){if(r.defaultImage){e(this).find("img#"+r.defaultImage).css("z-index","0")}else{e(this).find("img").first().css("z-index","0")}h(t,e(this).attr("id"))});e(this).on("mousemove",function(t){h(t,e(this).attr("id"))});e(this).on("mouseleave",function(t){e(this).find("img").css("z-index","0");if(r.defaultImage){e(this).find("img#"+r.defaultImage).css("z-index","1")}else{e(this).find("img").first().css("z-index","1")}if(r.showTitles){e("#"+r.showTitles).html(r.defaultImage?e(this).find("img#"+r.defaultImage).attr("title"):e(this).find("img").first().attr("title"))}})})}})(jQuery)